<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>심플 슬라이딩 퍼즐</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; background-color: #f0f2f5; }
        h1 { color: #333; }
        /* 퍼즐 판 스타일 */
        #puzzle-board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 10px;
            background-color: #bbada0;
            padding: 10px;
            border-radius: 8px;
        }
        /* 각 조각 스타일 */
        .tile {
            width: 100px;
            height: 100px;
            background-color: #eee4da;
            color: #776e65;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }
        /* 빈 칸 스타일 */
        .tile.empty { background-color: #cdc1b4; cursor: default; }
        button { margin-top: 20px; padding: 10px 20px; font-size: 1rem; cursor: pointer; }
    </style>
</head>
<body>

    <h1>슬라이딩 퍼즐</h1>
    <div id="puzzle-board"></div>
    <button onclick="shuffleGame()">게임 섞기</button>

    <script>
        const boardElement = document.getElementById('puzzle-board');
        let tiles = [1, 2, 3, 4, 5, 6, 7, 8, null]; // null은 빈 칸

        // 보드 그리기 함수
        function renderBoard() {
            boardElement.innerHTML = '';
            tiles.forEach((tile, index) => {
                const tileDiv = document.createElement('div');
                tileDiv.classList.add('tile');
                if (tile === null) {
                    tileDiv.classList.add('empty');
                    tileDiv.textContent = '';
                } else {
                    tileDiv.textContent = tile;
                    tileDiv.addEventListener('click', () => moveTile(index));
                }
                boardElement.appendChild(tileDiv);
            });
        }

        // 타일 이동 로직
        function moveTile(index) {
            const emptyIndex = tiles.indexOf(null);
            const row = Math.floor(index / 3);
            const col = index % 3;
            const emptyRow = Math.floor(emptyIndex / 3);
            const emptyCol = emptyIndex % 3;

            // 상하좌우 인접해 있는지 확인
            const isAdjacent = (Math.abs(row - emptyRow) + Math.abs(col - emptyCol)) === 1;

            if (isAdjacent) {
                // 위치 교체
                [tiles[index], tiles[emptyIndex]] = [tiles[emptyIndex], tiles[index]];
                renderBoard();
                checkWin();
            }
        }

        // 섞기 함수
        function shuffleGame() {
            // 단순 무작위 섞기는 풀 수 없는 퍼즐을 만들 수 있으므로 무작위 이동을 반복함
            for (let i = 0; i < 100; i++) {
                const emptyIndex = tiles.indexOf(null);
                const neighbors = getNeighbors(emptyIndex);
                const randomNeighbor = neighbors[Math.floor(Math.random() * neighbors.length)];
                [tiles[emptyIndex], tiles[randomNeighbor]] = [tiles[randomNeighbor], tiles[emptyIndex]];
            }
            renderBoard();
        }

        function getNeighbors(index) {
            const row = Math.floor(index / 3);
            const col = index % 3;
            const neighbors = [];
            if (row > 0) neighbors.push(index - 3);
            if (row < 2) neighbors.push(index + 3);
            if (col > 0) neighbors.push(index - 1);
            if (col < 2) neighbors.push(index + 1);
            return neighbors;
        }

        // 승리 확인
        function checkWin() {
            const winCondition = [1, 2, 3, 4, 5, 6, 7, 8, null];
            if (tiles.every((val, index) => val === winCondition[index])) {
                setTimeout(() => alert('축하합니다! 맞추셨습니다!'), 100);
            }
        }

        // 초기 실행
        renderBoard();
    </script>
</body>
</html>
